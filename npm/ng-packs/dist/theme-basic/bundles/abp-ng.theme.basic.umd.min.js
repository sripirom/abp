!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@abp/ng.core"),require("@abp/ng.theme.shared"),require("@angular/core"),require("@ng-bootstrap/ng-bootstrap"),require("@ngx-validate/core"),require("@ngxs/store"),require("primeng/toast"),require("@ngxs/router-plugin"),require("angular-oauth2-oidc"),require("just-compare"),require("rxjs"),require("rxjs/operators"),require("snq")):"function"==typeof define&&define.amd?define("@abp/ng.theme.basic",["exports","@abp/ng.core","@abp/ng.theme.shared","@angular/core","@ng-bootstrap/ng-bootstrap","@ngx-validate/core","@ngxs/store","primeng/toast","@ngxs/router-plugin","angular-oauth2-oidc","just-compare","rxjs","rxjs/operators","snq"],n):n(((e=e||self).abp=e.abp||{},e.abp.ng=e.abp.ng||{},e.abp.ng.theme=e.abp.ng.theme||{},e.abp.ng.theme.basic={}),e.ng_core,e.ng_theme_shared,e.ng.core,e.ngBootstrap,e.core$1,e.store,e.toast,e.routerPlugin,e.angularOauth2Oidc,e.compare,e.rxjs,e.rxjs.operators,e.snq)}(this,function(e,n,t,r,o,a,i,l,s,p,u,c,d,g){"use strict";u=u&&u.hasOwnProperty("default")?u.default:u,g=g&&g.hasOwnProperty("default")?g.default:g;var m=function(e,n){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)};var f=function(){return(f=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};function h(e,n,t,r){var o,a=arguments.length,i=a<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,n,t,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(n,t,i):o(n,t))||i);return a>3&&i&&Object.defineProperty(n,t,i),i}function y(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)}function b(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,o,a=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(t=a.return)&&t.call(a)}finally{if(o)throw o.error}}return i}function v(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(b(arguments[n]));return e}var w=function(){function e(){}return e.type="account",e.decorators=[{type:r.Component,args:[{selector:"abp-layout-account",template:"<router-outlet></router-outlet>\r\n"}]}],e}();var C=function(){function e(e){this.payload=e}return e.type="[Layout] Add Navigation Element",e}();var A=function(){function e(e){this.name=e}return e.type="[Layout] Remove Navigation ElementByName",e}();var L=function(){function e(){}return e.getNavigationElements=function(e){return e.navigationElements},e.prototype.layoutAddAction=function(e,n){var t=e.getState,r=e.patchState,o=n.payload,a=void 0===o?[]:o,i=t().navigationElements;if(Array.isArray(a)||(a=[a]),i.length&&(a=g(function(){return a.filter(function(e){var n=e.name;return i.findIndex(function(e){return e.name===n})<0})},[])),a.length)return r({navigationElements:i=v(i,a).map(function(e){return f({},e,{order:e.order||99})}).sort(function(e,n){return e.order-n.order})})},e.prototype.layoutRemoveAction=function(e,n){var t=e.getState,r=e.patchState,o=n.name,a=t().navigationElements,i=a.findIndex(function(e){return e.name===o});return i>-1&&(a=a.splice(i,1)),r({navigationElements:a})},h([i.Action(C),y("design:type",Function),y("design:paramtypes",[Object,C]),y("design:returntype",void 0)],e.prototype,"layoutAddAction",null),h([i.Action(A),y("design:type",Function),y("design:paramtypes",[Object,A]),y("design:returntype",void 0)],e.prototype,"layoutRemoveAction",null),h([i.Selector(),y("design:type",Function),y("design:paramtypes",[Object]),y("design:returntype",Array)],e,"getNavigationElements",null),e=h([i.State({name:"LayoutState",defaults:{navigationElements:[]}})],e)}(),O=function(){function e(e,n){this.store=e,this.oauthService=n,this.rightPartElements=[],this.trackByFn=function(e,n){return n.name},this.trackElementByFn=function(e,n){return n}}return Object.defineProperty(e.prototype,"visibleRoutes$",{get:function(){return this.routes$.pipe(d.map(function(e){return function e(n){return n.reduce(function(n,t){return t.invisible?n:(t.children&&t.children.length&&(t.children=e(t.children)),v(n,[t]))},[])}(e)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultLanguage$",{get:function(){var e=this;return this.languages$.pipe(d.map(function(n){return g(function(){return n.find(function(n){return n.cultureName===e.selectedLangCulture}).displayName})},""))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropdownLanguages$",{get:function(){var e=this;return this.languages$.pipe(d.map(function(n){return g(function(){return n.filter(function(n){return n.cultureName!==e.selectedLangCulture})})},[]))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedLangCulture",{get:function(){return this.store.selectSnapshot(n.SessionState.getLanguage)},enumerable:!0,configurable:!0}),e.prototype.checkWindowWidth=function(){var e=this;setTimeout(function(){e.navbarRootDropdowns.forEach(function(e){e.close()}),window.innerWidth<768?e.isDropdownChildDynamic=!1:e.isDropdownChildDynamic=!0},0)},e.prototype.ngAfterViewInit=function(){var e=this;this.store.selectSnapshot(L.getNavigationElements).map(function(e){return e.name}).indexOf("LanguageRef")<0&&this.store.dispatch(new C([{element:this.languageRef,order:4,name:"LanguageRef"},{element:this.currentUserRef,order:5,name:"CurrentUserRef"}])),this.navElements$.pipe(d.map(function(e){return e.map(function(e){return e.element})}),d.filter(function(n){return!u(n,e.rightPartElements)}),n.takeUntilDestroy(this)).subscribe(function(n){setTimeout(function(){return e.rightPartElements=n},0)}),this.checkWindowWidth(),c.fromEvent(window,"resize").pipe(n.takeUntilDestroy(this),d.debounceTime(250)).subscribe(function(){e.checkWindowWidth()})},e.prototype.ngOnDestroy=function(){},e.prototype.onChangeLang=function(e){this.store.dispatch(new n.SetLanguage(e))},e.prototype.logout=function(){this.oauthService.logOut(),this.store.dispatch(new s.Navigate(["/"],null,{state:{redirectUrl:this.store.selectSnapshot(s.RouterState).state.url}})),this.store.dispatch(new n.GetAppConfiguration)},e.type="application",e.decorators=[{type:r.Component,args:[{selector:"abp-layout-application",template:'<abp-layout>\r\n  <ul class="navbar-nav mr-auto">\r\n    <ng-container\r\n      *ngFor="let route of visibleRoutes$ | async; trackBy: trackByFn"\r\n      [ngTemplateOutlet]="route?.children?.length ? dropdownLink : defaultLink"\r\n      [ngTemplateOutletContext]="{ $implicit: route }"\r\n    >\r\n    </ng-container>\r\n\r\n    <ng-template #defaultLink let-route>\r\n      <li class="nav-item" [abpPermission]="route.requiredPolicy">\r\n        <a class="nav-link" [routerLink]="[route.url]">{{ route.name | abpLocalization }}</a>\r\n      </li>\r\n    </ng-template>\r\n\r\n    <ng-template #dropdownLink let-route>\r\n      <li\r\n        #navbarRootDropdown\r\n        ngbDropdown\r\n        [abpPermission]="route.requiredPolicy"\r\n        [abpVisibility]="routeContainer"\r\n        class="nav-item dropdown pointer"\r\n        display="static"\r\n      >\r\n        <a ngbDropdownToggle class="nav-link dropdown-toggle pointer" data-toggle="dropdown">\r\n          {{ route.name | abpLocalization }}\r\n        </a>\r\n        <div #routeContainer ngbDropdownMenu class="dropdown-menu dropdown-menu-right">\r\n          <ng-template\r\n            #forTemplate\r\n            ngFor\r\n            [ngForOf]="route.children"\r\n            [ngForTrackBy]="trackByFn"\r\n            [ngForTemplate]="childWrapper"\r\n          ></ng-template>\r\n        </div>\r\n      </li>\r\n    </ng-template>\r\n\r\n    <ng-template #childWrapper let-child>\r\n      <ng-template\r\n        [ngTemplateOutlet]="child?.children?.length ? dropdownChild : defaultChild"\r\n        [ngTemplateOutletContext]="{ $implicit: child }"\r\n      ></ng-template>\r\n    </ng-template>\r\n\r\n    <ng-template #defaultChild let-child>\r\n      <div class="dropdown-submenu" [abpPermission]="child.requiredPolicy">\r\n        <a class="dropdown-item py-2 px-2" [routerLink]="[child.url]">\r\n          <i *ngIf="child.iconClass" [ngClass]="child.iconClass"></i>\r\n          {{ child.name | abpLocalization }}</a\r\n        >\r\n      </div>\r\n    </ng-template>\r\n\r\n    <ng-template #dropdownChild let-child>\r\n      <div\r\n        [abpVisibility]="childrenContainer"\r\n        class="dropdown-submenu pointer"\r\n        ngbDropdown\r\n        [display]="isDropdownChildDynamic ? \'dynamic\' : \'static\'"\r\n        placement="right-top"\r\n        [abpPermission]="child.requiredPolicy"\r\n      >\r\n        <div ngbDropdownToggle [class.dropdown-toggle]="false" class="pointer">\r\n          <a\r\n            abpEllipsis="210px"\r\n            [abpEllipsisEnabled]="isDropdownChildDynamic"\r\n            role="button"\r\n            class="btn d-block text-left py-2 px-2 dropdown-toggle"\r\n          >\r\n            <i *ngIf="child.iconClass" [ngClass]="child.iconClass"></i>\r\n            {{ child.name | abpLocalization }}\r\n          </a>\r\n        </div>\r\n        <div #childrenContainer ngbDropdownMenu class="dropdown-menu dropdown-menu-right">\r\n          <ng-template\r\n            ngFor\r\n            [ngForOf]="child.children"\r\n            [ngForTrackBy]="trackByFn"\r\n            [ngForTemplate]="childWrapper"\r\n          ></ng-template>\r\n        </div>\r\n      </div>\r\n    </ng-template>\r\n  </ul>\r\n\r\n  <ul class="navbar-nav ml-auto">\r\n    <ng-container\r\n      *ngFor="let element of rightPartElements; trackBy: trackElementByFn"\r\n      [ngTemplateOutlet]="element"\r\n    ></ng-container>\r\n  </ul>\r\n</abp-layout>\r\n\r\n<ng-template #language>\r\n  <li class="nav-item dropdown pointer" ngbDropdown>\r\n    <a ngbDropdownToggle class="nav-link dropdown-toggle text-white pointer" data-toggle="dropdown">\r\n      {{ defaultLanguage$ | async }}\r\n    </a>\r\n    <div ngbDropdownMenu class="dropdown-menu dropdown-menu-right">\r\n      <a\r\n        *ngFor="let lang of dropdownLanguages$ | async"\r\n        class="dropdown-item"\r\n        (click)="onChangeLang(lang.cultureName)"\r\n        >{{ lang?.displayName }}</a\r\n      >\r\n    </div>\r\n  </li>\r\n</ng-template>\r\n\r\n<ng-template #currentUser>\r\n  <li *ngIf="(currentUser$ | async)?.isAuthenticated" class="nav-item dropdown pointer" ngbDropdown>\r\n    <a ngbDropdownToggle class="nav-link dropdown-toggle text-white pointer" data-toggle="dropdown">\r\n      {{ (currentUser$ | async)?.userName }}\r\n    </a>\r\n    <div ngbDropdownMenu class="dropdown-menu dropdown-menu-right">\r\n      <a class="dropdown-item pointer" routerLink="/account/manage-profile">{{\r\n        \'AbpAccount::ManageYourProfile\' | abpLocalization\r\n      }}</a>\r\n      <a class="dropdown-item pointer" (click)="logout()">{{ \'AbpUi::Logout\' | abpLocalization }}</a>\r\n    </div>\r\n  </li>\r\n</ng-template>\r\n'}]}],e.ctorParameters=function(){return[{type:i.Store},{type:p.OAuthService}]},e.propDecorators={currentUserRef:[{type:r.ViewChild,args:["currentUser",{static:!1,read:r.TemplateRef}]}],languageRef:[{type:r.ViewChild,args:["language",{static:!1,read:r.TemplateRef}]}],navbarRootDropdowns:[{type:r.ViewChildren,args:["navbarRootDropdown",{read:o.NgbDropdown}]}]},h([i.Select(n.ConfigState.getOne("routes")),y("design:type",c.Observable)],e.prototype,"routes$",void 0),h([i.Select(n.ConfigState.getOne("currentUser")),y("design:type",c.Observable)],e.prototype,"currentUser$",void 0),h([i.Select(n.ConfigState.getDeep("localization.languages")),y("design:type",c.Observable)],e.prototype,"languages$",void 0),h([i.Select(L.getNavigationElements),y("design:type",c.Observable)],e.prototype,"navElements$",void 0),e}();var S=function(){function e(){}return e.type="empty",e.decorators=[{type:r.Component,args:[{selector:"abp-layout-empty",template:"\n    Layout-empty\n    <router-outlet></router-outlet>\n  "}]}],e}();var x=function(){function e(e){this.store=e,this.isCollapsed=!0}return Object.defineProperty(e.prototype,"appInfo",{get:function(){return this.store.selectSnapshot(n.ConfigState.getApplicationInfo)},enumerable:!0,configurable:!0}),e.decorators=[{type:r.Component,args:[{selector:" abp-layout",template:'<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top" id="main-navbar">\r\n  <a class="navbar-brand" routerLink="/">\r\n    <img *ngIf="appInfo.logoUrl; else appName" [src]="appInfo.logoUrl" [alt]="appInfo.name" />\r\n  </a>\r\n  <button class="navbar-toggler" type="button" [attr.aria-expanded]="!isCollapsed" (click)="isCollapsed = !isCollapsed">\r\n    <span class="navbar-toggler-icon"></span>\r\n  </button>\r\n  <div class="collapse navbar-collapse" id="main-navbar-collapse" [ngbCollapse]="isCollapsed">\r\n    <ng-content></ng-content>\r\n  </div>\r\n</nav>\r\n\r\n<div\r\n  [@slideFromBottom]="outlet && outlet.activatedRoute && outlet.activatedRoute.routeConfig.path"\r\n  style="padding-top: 5rem;"\r\n  class="container"\r\n>\r\n  <router-outlet #outlet="outlet"></router-outlet>\r\n</div>\r\n\r\n<abp-confirmation></abp-confirmation>\r\n<abp-toast></abp-toast>\r\n\r\n<ng-template #appName>\r\n  {{ appInfo.name }}\r\n</ng-template>\r\n',animations:[t.slideFromBottom]}]}],e.ctorParameters=function(){return[{type:i.Store}]},e}();var k=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return function(e,n){function t(){this.constructor=e}m(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(n,e),Object.defineProperty(n.prototype,"abpErrors",{get:function(){return this.errors&&this.errors.length?this.errors.map(function(e){if(!e.message)return e;var n=e.message.indexOf("[");return n>-1?f({},e,{message:e.message.slice(0,n),interpoliteParams:e.message.slice(n+1,e.message.length-1).split(",")}):e}):[]},enumerable:!0,configurable:!0}),n.decorators=[{type:r.Component,args:[{selector:"abp-validation-error",template:'\n    <div class="invalid-feedback" *ngFor="let error of abpErrors; trackBy: trackByFn">\n      {{ error.message | abpLocalization: error.interpoliteParams }}\n    </div>\n  ',changeDetection:r.ChangeDetectionStrategy.OnPush,encapsulation:r.ViewEncapsulation.None}]}],n}(a.ValidationErrorComponent),P=function(){function e(e){this.lazyLoadService=e,this.appendStyle().subscribe()}return e.prototype.appendStyle=function(){return this.lazyLoadService.load(null,"style","\n.content-header-title {\n    font-size: 24px;\n}\n\n.entry-row {\n    margin-bottom: 15px;\n}\n","head","afterbegin")},e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:n.LazyLoadService}]},e.ngInjectableDef=r.ɵɵdefineInjectable({factory:function(){return new e(r.ɵɵinject(n.LazyLoadService))},token:e,providedIn:"root"}),e}();var D,E=[O,w,S],F=function(){function e(e){this.initialService=e}return e.decorators=[{type:r.NgModule,args:[{declarations:v(E,[x,k]),imports:[n.CoreModule,t.ThemeSharedModule,o.NgbCollapseModule,o.NgbDropdownModule,l.ToastModule,a.NgxValidateCoreModule,i.NgxsModule.forFeature([L]),a.NgxValidateCoreModule.forRoot({targetSelector:".form-group",blueprints:{email:"AbpAccount::ThisFieldIsNotAValidEmailAddress.",max:"AbpAccount::ThisFieldMustBeBetween{0}And{1}[{{ min }},{{ max }}]",maxlength:"AbpAccount::ThisFieldMustBeAStringWithAMaximumLengthOf{1}[{{ requiredLength }}]",min:"AbpAccount::ThisFieldMustBeBetween{0}And{1}[{{ min }},{{ max }}]",minlength:"AbpAccount::ThisFieldMustBeAStringOrArrayTypeWithAMinimumLengthOf[{{ min }},{{ max }}]",required:"AbpAccount::ThisFieldIsRequired.",passwordMismatch:"AbpIdentity::Identity.PasswordConfirmationFailed"},errorTemplate:k})],exports:v(E),entryComponents:v(E,[k])}]}],e.ctorParameters=function(){return[{type:P}]},e}();(function(e){function n(){}function t(){}e.State=n,e.NavigationElement=t})(D||(D={})),e.AccountLayoutComponent=w,e.AddNavigationElement=C,e.ApplicationLayoutComponent=O,e.EmptyLayoutComponent=S,e.LAYOUTS=E,e.LayoutState=L,e.RemoveNavigationElementByName=A,e.ThemeBasicModule=F,e.ValidationErrorComponent=k,e.ɵa=O,e.ɵb=L,e.ɵc=w,e.ɵd=S,e.ɵe=x,e.ɵf=k,e.ɵg=L,e.ɵh=C,e.ɵi=A,e.ɵk=P,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=abp-ng.theme.basic.umd.min.js.map